{% comment %}
  MOBY Footer Section
  - 4-column layout: Brand info, Quick Links, Support, Newsletter
  - Payment icons
  - Copyright
{% endcomment %}

<footer class="moby-footer">
  <div class="moby-container">
    <div class="moby-footer__grid">
      <!-- Brand Info -->
      <div class="moby-footer__column">
        <h3 class="moby-footer__logo">MOBY</h3>
        <p class="moby-footer__description">
          {{ section.settings.description | default: "Science-backed clarity and strength. Effortless daily creatine for brain, body, and balance." }}
        </p>
        {%- if section.settings.email != blank -%}
          <a href="mailto:{{ section.settings.email }}" class="moby-footer__email">
            {{ section.settings.email }}
          </a>
        {%- endif -%}
      </div>

      <!-- Quick Links -->
      <div class="moby-footer__column">
        <h4 class="moby-footer__heading">Quick Links</h4>
        <ul class="moby-footer__links">
          {%- for block in section.blocks -%}
            {%- if block.type == 'quick_link' -%}
              <li {{ block.shopify_attributes }}>
                <a href="{{ block.settings.link }}">{{ block.settings.label }}</a>
              </li>
            {%- endif -%}
          {%- endfor -%}
        </ul>
      </div>

      <!-- Support -->
      <div class="moby-footer__column">
        <h4 class="moby-footer__heading">Support</h4>
        <ul class="moby-footer__links">
          {%- for block in section.blocks -%}
            {%- if block.type == 'support_link' -%}
              <li {{ block.shopify_attributes }}>
                <a href="{{ block.settings.link }}"{% if block.settings.new_tab %} target="_blank" rel="noopener noreferrer"{% endif %}>
                  {{ block.settings.label }}
                </a>
              </li>
            {%- endif -%}
          {%- endfor -%}
        </ul>
      </div>

      <!-- Newsletter -->
      <div class="moby-footer__column">
        <h4 class="moby-footer__heading">{{ section.settings.newsletter_heading | default: "Join the Movement" }}</h4>
        <p class="moby-footer__newsletter-text">
          {{ section.settings.newsletter_text | default: "Science-backed insights. Product drops. Delivered monthly." }}
        </p>
        
        {%- form 'customer', class: 'moby-footer__form' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="moby-footer__form-row">
            <input
              type="email"
              name="contact[email]"
              placeholder="{{ section.settings.newsletter_placeholder | default: 'Your email' }}"
              class="moby-footer__input"
              required
            >
            <button type="submit" class="moby-footer__submit">
              Join
            </button>
          </div>
        {%- endform -%}
      </div>
    </div>

    <!-- Payment Icons -->
    {%- if section.settings.show_payment_icons -%}
      <div class="moby-footer__payments">
        <span class="moby-footer__payments-label">Accepted Payments</span>
        <div class="moby-footer__payments-grid">
          <div class="moby-footer__payment-row">
            <div class="moby-footer__payment-icon">
              <img src="https://cdn.simpleicons.org/googlepay" alt="Google Pay" loading="lazy" width="32" height="20">
            </div>
            <div class="moby-footer__payment-icon">
              <img src="https://cdn.simpleicons.org/applepay" alt="Apple Pay" loading="lazy" width="32" height="20">
            </div>
            <div class="moby-footer__payment-icon moby-footer__payment-icon--shop">
              <img src="https://cdn.simpleicons.org/shopify/white" alt="Shop Pay" loading="lazy" width="28" height="16">
            </div>
            <div class="moby-footer__payment-icon">
              <img src="https://cdn.simpleicons.org/paypal" alt="PayPal" loading="lazy" width="32" height="20">
            </div>
            <div class="moby-footer__payment-icon">
              <img src="https://cdn.simpleicons.org/mastercard" alt="Mastercard" loading="lazy" width="32" height="20">
            </div>
          </div>
          <div class="moby-footer__payment-row">
            <div class="moby-footer__payment-icon">
              <img src="https://cdn.simpleicons.org/visa" alt="Visa" loading="lazy" width="32" height="20">
            </div>
            <div class="moby-footer__payment-icon moby-footer__payment-icon--klarna">
              <img src="https://cdn.simpleicons.org/klarna/black" alt="Klarna" loading="lazy" width="28" height="16">
            </div>
            <div class="moby-footer__payment-icon">
              <img src="{{ 'swish-logo.png' | asset_url }}" alt="Swish" loading="lazy" width="32" height="20" onerror="this.style.display='none'">
            </div>
            <div class="moby-footer__payment-icon">
              <img src="https://cdn.simpleicons.org/americanexpress" alt="American Express" loading="lazy" width="36" height="24">
            </div>
          </div>
        </div>
      </div>
    {%- endif -%}

    <!-- Copyright -->
    <div class="moby-footer__copyright">
      <p>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. All rights reserved.</p>
    </div>
  </div>
</footer>

<style>
  .moby-footer {
    background: var(--moby-sage, #C9C8B6);
    padding: 48px 0 96px;
  }

  @media (min-width: 768px) {
    .moby-footer {
      padding: 64px 0 80px;
    }
  }

  .moby-footer__grid {
    display: grid;
    gap: 32px;
    margin-bottom: 32px;
  }

  @media (min-width: 768px) {
    .moby-footer__grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .moby-footer__grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .moby-footer__logo {
    font-family: 'Memoir', serif;
    font-size: 24px;
    text-transform: uppercase;
    margin: 0 0 16px;
    color: var(--moby-dark, #1C1A10);
  }

  .moby-footer__description {
    font-family: 'N27', sans-serif;
    font-size: 14px;
    line-height: 1.6;
    color: rgba(28, 26, 16, 0.7);
    margin: 0 0 16px;
  }

  .moby-footer__email {
    font-family: 'N27', sans-serif;
    font-size: 14px;
    color: rgba(28, 26, 16, 0.7);
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .moby-footer__email:hover {
    color: var(--moby-dark, #1C1A10);
  }

  .moby-footer__heading {
    font-family: 'N27', sans-serif;
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin: 0 0 16px;
    color: var(--moby-dark, #1C1A10);
  }

  .moby-footer__links {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .moby-footer__links a {
    font-family: 'N27', sans-serif;
    font-size: 14px;
    color: rgba(28, 26, 16, 0.7);
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .moby-footer__links a:hover {
    color: var(--moby-dark, #1C1A10);
  }

  .moby-footer__newsletter-text {
    font-family: 'N27', sans-serif;
    font-size: 14px;
    line-height: 1.6;
    color: rgba(28, 26, 16, 0.7);
    margin: 0 0 16px;
  }

  .moby-footer__form-row {
    display: flex;
    gap: 8px;
  }

  .moby-footer__input {
    flex: 1;
    padding: 12px 16px;
    border: 1px solid rgba(28, 26, 16, 0.2);
    border-radius: 4px;
    background: var(--color-background, #ffffff);
    font-family: 'N27', sans-serif;
    font-size: 14px;
    color: var(--moby-dark, #1C1A10);
  }

  .moby-footer__input::placeholder {
    color: rgba(28, 26, 16, 0.7);
  }

  .moby-footer__submit {
    padding: 12px 20px;
    background: var(--moby-olive, #4F4A32);
    color: #ffffff;
    border: none;
    border-radius: 4px;
    font-family: 'N27', sans-serif;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  .moby-footer__submit:hover {
    background: rgba(79, 74, 50, 0.9);
  }

  /* Payment Icons */
  .moby-footer__payments {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding: 24px 0;
    margin-bottom: 24px;
    border-bottom: 1px solid rgba(28, 26, 16, 0.1);
  }

  .moby-footer__payments-label {
    font-family: 'N27', sans-serif;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: rgba(28, 26, 16, 0.7);
  }

  .moby-footer__payments-grid {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }

  .moby-footer__payment-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .moby-footer__payment-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 28px;
    background: var(--color-background, #ffffff);
    border: 1px solid rgba(28, 26, 16, 0.1);
    border-radius: 4px;
  }

  .moby-footer__payment-icon--shop {
    background: #5A31F4;
  }

  .moby-footer__payment-icon--klarna {
    background: #FFB3C7;
  }

  .moby-footer__payment-icon img {
    max-width: 32px;
    max-height: 20px;
    object-fit: contain;
  }

  /* Copyright */
  .moby-footer__copyright {
    text-align: center;
  }

  .moby-footer__copyright p {
    font-family: 'N27', sans-serif;
    font-size: 14px;
    color: rgba(28, 26, 16, 0.7);
    margin: 0;
  }
</style>

{% schema %}
{
  "name": "MOBY Footer",
  "tag": "section",
  "class": "moby-footer-wrapper",
  "settings": [
    {
      "type": "textarea",
      "id": "description",
      "label": "Brand description",
      "default": "Science-backed clarity and strength. Effortless daily creatine for brain, body, and balance."
    },
    {
      "type": "text",
      "id": "email",
      "label": "Contact email",
      "default": "hello@drinkmoby.com"
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "text",
      "id": "newsletter_heading",
      "label": "Newsletter heading",
      "default": "Join the Movement"
    },
    {
      "type": "text",
      "id": "newsletter_text",
      "label": "Newsletter text",
      "default": "Science-backed insights. Product drops. Delivered monthly."
    },
    {
      "type": "text",
      "id": "newsletter_placeholder",
      "label": "Input placeholder",
      "default": "Your email"
    },
    {
      "type": "header",
      "content": "Payment icons"
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Show payment icons",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "quick_link",
      "name": "Quick Link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Shop"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "support_link",
      "name": "Support Link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Shipping & Returns"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "checkbox",
          "id": "new_tab",
          "label": "Open in new tab",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "MOBY Footer",
      "blocks": [
        {
          "type": "quick_link",
          "settings": {
            "label": "Shop"
          }
        },
        {
          "type": "quick_link",
          "settings": {
            "label": "The Power Station"
          }
        },
        {
          "type": "quick_link",
          "settings": {
            "label": "About Us"
          }
        },
        {
          "type": "quick_link",
          "settings": {
            "label": "Partner with MOBY"
          }
        },
        {
          "type": "support_link",
          "settings": {
            "label": "Shipping & Returns"
          }
        },
        {
          "type": "support_link",
          "settings": {
            "label": "Manage Subscriptions",
            "new_tab": true
          }
        },
        {
          "type": "support_link",
          "settings": {
            "label": "Privacy Policy"
          }
        },
        {
          "type": "support_link",
          "settings": {
            "label": "Terms of Service"
          }
        }
      ]
    }
  ]
}
{% endschema %}
